import urllib.request
from bs4 import BeautifulSoup
import requests


amazon_url = "https://www.amazon.com/s?k=ultrawide+monitor&ref=nb_sb_noss_2"
target_url = "https://www.target.com/s?searchTerm=bar+soap"
walgreens_url = "https://www.walgreens.com/search/results.jsp?Ntt=pencil"
headers={'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5)AppleWebKit/605.1.15 (KHTML, like Gecko)Version/12.1.1 Safari/605.1.15'}
sauce =  urllib.request.urlopen(walgreens_url).read()
soup = BeautifulSoup(sauce, 'html.parser')


def extract_record(item):
    # Extract and records data of a single item

    try :
        # price
        price_parent = item.find('span' , 'product__price font__sixteen color__text-red')
        price = price_parent.find('span', 'sr-only').text
    except AttributeError:
        try :
            # price
            price_parent = item.find('span' , 'product__price font__sixteen wag-inline-txt')
            price = price_parent.find('span', 'sr-only').text
        except AttributeError:
            return
    return price


# Array of items and price
records = []
results = soup.find_all('div',{'class': 'item card card__product'})

for item in results:
    record = extract_record(item)
    if(record):
        records.append(record)


print (records)


